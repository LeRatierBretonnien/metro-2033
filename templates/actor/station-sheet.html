<form class="{{cssClass}} flexcol {{system.type}}" autocomplete="off">
    <div class="actor-header">
        <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" />
        <div class="header-fields">
            <div class="flex row align-center space-between" style="margin-bottom: 1rem;">
                <div>
                    <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name" /></h1>
                </div>
            </div>
            <div class="flex row">
                <label style="align-self: center" ><strong>{{localize "MYZ.COMMENT"}}:</strong></label>
                <input type="text" class="nolabel" name="system.comment" value="{{system.comment}}" />
            </div>
        </div>
    </div>

    {{!-- Sheet Tab Navigation --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="attributes">{{localize "MYZ.ATTRIBUTES"}}</a>
        <a class="item" data-tab="crew">{{localize "MYZ.SPACESHIP.Crew"}}</a>
        <a class="item" data-tab="gear">{{localize "MYZ.SPACESHIP.Cargo"}}</a>
        <a class="item" data-tab="info">{{localize "MYZ.INFO"}}</a>
    </nav>

    <div class="sheet-body">
        <div class="tab" data-group="primary" data-tab="attributes">
            <div class="box-list">
                <div class="flexrow align-center spaceship-resource-row-header">
                    <p><strong>{{localize "MYZ.SPACESHIP.Stats"}}:</strong></p>
                    <p><strong>{{localize "MYZ.SPACESHIP.Gear_Bonus"}}:</strong></p>
                    <p><strong>{{localize "MYZ.SPACESHIP.Skills"}}:</strong></p>
                </div>
                <div class="flexrow align-center odd-child spaceship-resource-row ">
                    <label><strong>{{localize "MYZ.SPACESHIP.Hull"}}:</strong></label>
                    <div>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.hull.value" value="{{system.hull.value}}" />
                        <span>/</span>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.hull.max" value="{{system.hull.max}}" />
                    </div>
                    <div class="ship-skill-list">
                        {{#each spaceshipSkills.Hull}}<span class="skill" data-skillkey="{{this}}" data-gearbonus="{{../system.hull.value}}">{{localize (concat "MYZ.SKILL_" this)}}</span>, {{/each}}
                    </div>
                </div>
                <div class="flexrow align-center spaceship-resource-row">
                    <label><strong>{{localize "MYZ.SPACESHIP.Sensors"}}:</strong></label>
                    <div>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.sensors.value" value="{{system.sensors.value}}" />
                        <span>/</span>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.sensors.max" value="{{system.sensors.max}}" />
                    </div>
                    <div class="ship-skill-list">
                        {{#each spaceshipSkills.Sensors}}<span class="skill" data-skillkey="{{this}}" data-gearbonus="{{../system.sensors.value}}">{{localize (concat "MYZ.SKILL_" this)}}</span>, {{/each}}
                    </div>
                </div>
                <div class="flexrow align-center odd-child spaceship-resource-row">
                    <label><strong>{{localize "MYZ.SPACESHIP.Engine"}}:</strong></label>
                    <div>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.engine.value" value="{{system.engine.value}}" />
                        <span>/</span>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.engine.max" value="{{system.engine.max}}" />
                    </div>
                    <div class="ship-skill-list">
                        {{#each spaceshipSkills.Engine}}<span class="skill" data-skillkey="{{this}}" data-gearbonus="{{../system.engine.value}}">{{localize (concat "MYZ.SKILL_" this)}}</span>, {{/each}}
                    </div>
                </div>
                <div class="flexrow align-center spaceship-resource-row">
                    <label><strong>{{localize "MYZ.SPACESHIP.Life_Support"}}:</strong></label>
                    <div>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.lifeSupport.value" value="{{system.lifeSupport.value}}" />
                        <span>/</span>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.lifeSupport.max" value="{{system.lifeSupport.max}}" />
                    </div>
                    <div class="ship-skill-list">
                        {{#each spaceshipSkills.LifeSupport}}<span class="skill" data-skillkey="{{this}}" data-gearbonus="{{../system.lifeSupport.value}}">{{localize (concat "MYZ.SKILL_" this)}}</span>, {{/each}}
                    </div>
                </div>
            </div>
            <div class="grid" style="margin-bottom: 5px;">
                <div class="flexrow flex-group-left odd-child">
                    <label><strong>{{localize "MYZ.SPACESHIP.Resilience"}}:</strong></label>
                    <div>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.resilience.value" value="{{system.resilience.value}}" />
                        <span>/</span>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.resilience.max" value="{{system.resilience.max}}" />
                    </div>
                </div>
                <div class="flexrow flex-group-left odd-child">
                    <label><strong>{{localize "MYZ.SPACESHIP.Armor"}}:</strong></label>
                    <div>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.armor.value" value="{{system.armor.value}}" />
                        <span>/</span>
                        <input class="nolabel short-input" type="number" data-type="Number" name="system.armor.max" value="{{system.armor.max}}" />
                    </div>
                </div>
            </div>

            <div class="box-item physical header flex row align-center space-between weapon spaceship-resource-row-header">
                <label class="item-name">{{localize "MYZ.WEAPONS"}}</label>
                <div class="item-values grid grid-3col center">
                    <label>{{localize 'MYZ.BONUS'}}</label>
                    <label>{{localize 'MYZ.DAMAGE'}}</label>
                    <label>{{localize 'MYZ.RANGE'}}</label>
                </div>
                <div class="item-controls">
                    <a class="item-create" data-type="weapon">{{localize "MYZ.Add"}}</a>
                </div>
            </div>
            <ol class="box-list">
                {{#each weapons as |weapon key|}}
                <li class="box-item physical flex row align-center space-between editable-item weapon" data-physical="1" data-item-id="{{weapon._id}}">
                    <span class="item-name flex row align-center roll-weapon rollable {{#if (isBroken weapon)}}broken{{/if}}" data-item-id="{{weapon._id}}">
                        <img class="item-image" src="{{weapon.img}}" />
                        <a>{{weapon.name}}</a>
                        {{#if (isArtifact weapon)}} <img class="item-image" src="systems/metro-2033/assets/ico/trophy.svg" style="border:none" />{{/if}}
                    </span>
                    <div class="item-values grid grid-3col center">
                        <span>
                            <input type="number" class="owned-item-value num-value-1rem" value="{{weapon.system.bonus.value}}" data-linked-value="system.bonus.value" data-item-id="{{weapon._id}}">
                            <label>/{{weapon.system.bonus.max}}</label>
                        </span>
                        <!-- <label class="flex flex-center">{{weapon.system.bonus.value}} / {{weapon.system.bonus.max}}</label> -->
                        <label class="flex flex-center">{{weapon.system.damage}}</label>
                        <label class="flex flex-center">{{localize (toUpperCase (concat "MYZ." weapon.system.range))}}</label>
                    </div>
                    <div class="item-controls">
                        {{#if weapon.system.stashed}}<a class="item-control item-stash-toggle" title='{{localize "MYZ.UN_STASH_ITEM"}}'>
                            <i class="fa-regular fa-box"></i>
                        </a>{{/if}}
                        <a class="item-control item-edit" title="{{localize 'MYZ.EDIT'}}"><i class="fas fa-edit"></i></a>
                    </div>
                </li>
                {{/each}}
            </ol>
        </div>

        <div class="tab" data-group="primary" data-tab="crew">
            <div class="grid">
                <div class="">
                    <div class=" textarea-box">
                        <label><strong>{{localize "MYZ.SPACESHIP.Crew"}}:</strong></label>
                        <textarea name="system.crew.description" rows="2">{{system.crew.description}}</textarea>
                    </div>
                    <div class="textarea-box">
                        <label><strong>{{localize "MYZ.SPACESHIP.Cargo"}}:</strong></label>
                        <textarea name="system.cargo.description" rows="2">{{system.cargo.description}}</textarea>
                    </div>
                    <div class="textarea-box">
                        <label><strong>{{localize "MYZ.SPACESHIP.Supplies"}}:</strong></label>
                        <textarea name="system.supplies.description" rows="2">{{system.supplies.description}}</textarea>
                    </div>

                </div>
                <div>
                    <div class="drop-zone-for-occupants flex column">
                        <div class="flex row align-center space-between spaceship-resource-row-header">
                            <div class="flex row item-name">
                                <label style="align-self: center">{{localize "MYZ.SPACESHIP.Crew_Count"}}: &nbsp;</label>
                                <input class="short-input" type="number" data-type="Number" name="system.occupantsCount" value="{{system.occupantsCount}}" />
                            </div>
                            <label class="remove-all-occupants" style="cursor:pointer; text-align: right;">{{localize "MYZ.REMOVEALL"}}</label>
                        </div>
                        <div class="box-list flex-column " style="min-height: 250px;">
                            {{#ifCond system.occupants.length '<' 1}}
                            <div class="flex" style="justify-content: center; align-items: center; height:200px">
                                <p>{{localize "MYZ.DRAG_OCCUPANTS_HERE"}}</p>
                            </div>
                            {{/ifCond}}
                            {{#each occupants}}
                            <div class="box-item flex row occupant" data-uuid="{{this.uuid}}" data-id="{{this.id}}">
                                <div class="item-name flex row align-center">
                                    <img class="occupant-image" src="{{this.img}}" title="{{this.name}}" style="margin-right: 1rem;" />
                                    <a class="occupant-name">{{this.name}}</a>
                                </div>
                                <div class="item-controls flex align-center" style="flex-direction: row-reverse;">
                                    <i class="fas fa-trash fa-fw occupant-delete"></i>
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab" data-group="primary" data-tab="gear">
            <div class="flex column">
                <div class="box-item header flex row align-center space-between spaceship-resource-row-header">
                    <div class="flex row item-name">
                        <label style="align-self: center">{{localize "MYZ.SPACESHIP.Cargo"}}</label>
                    </div>
                </div>
                <ol class="box-list flex column" style="min-height: 100px; padding: unset;">
                    {{#each itemsOnVehicle as |gear key|}}
                    <li class="box-item gear flex row align-center space-between editable-item" data-item-id="{{gear._id}}">
                        <span class="item-name flex row align-center">
                            <img class="item-image" src="{{gear.img}}" />
                            <a class="item-link">{{gear.name}} x &nbsp;</a>
                            <input type="number" class="owned-item-value num-value-1rem" value="{{gear.system.quantity}}" data-item-id="{{gear._id}}" data-linked-value="system.quantity">
                            {{#ifCond gear.type '==' 'weapon'}}
                            <div style="padding: 0 0.5rem;" class="flex align-center space-between">
                                <label style="margin-right: 0.5rem;">{{localize 'MYZ.BONUS'}}: {{gear.system.bonus.value}}</label>
                                <label style="margin-right: 0.5rem;">{{localize 'MYZ.DAMAGE'}}: {{gear.system.damage}} </label>
                            </div>
                            {{/ifCond}}
                        </span>
                        <span class="item-controls">
                            <a class="chatable" data-item-id="{{gear._id}}"><i class="fas fa-comment"></i></a>
                            <a class="item-control item-edit" title="{{localize 'MYZ.EDIT'}}"><i class="fas fa-edit"></i></a>
                            <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                        </span>
                    </li>
                    {{/each}}
                </ol>
            </div>
        </div>

        {{!-- Info Tab --}}
        {{> systems/metro-2033/templates/actor/partials/info.html}}

    </div>
</form>